{"version":3,"file":"VideoSource.js","names":["VideoSource","assets","isLoading","secrets","isLastPage","onSelect","onLoadMore","handleClick","useCallback","event","currentTarget","dataset","id","handleKeyPress","key","width","getDevicePixelRatio","maxDpr","map","asset","_id","lineHeight","length","DownloadIcon"],"sources":["../../src/components/VideoSource.tsx"],"sourcesContent":["import {DownloadIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, Spinner, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\n\nimport type {Secrets, VideoAssetDocument} from '../util/types'\nimport {CardLoadMore, ThumbGrid, VideoThumbnail} from './VideoSource.styles'\n\nexport interface Props {\n  assets: VideoAssetDocument[]\n  isLoading: boolean\n  isLastPage: boolean\n  secrets: Secrets\n  onSelect: (assetId: string) => void\n  onLoadMore: () => void\n}\n\nexport default function VideoSource({\n  assets,\n  isLoading,\n  secrets,\n  isLastPage,\n  onSelect,\n  onLoadMore,\n}: Props) {\n  const handleClick = useCallback<React.MouseEventHandler<HTMLDivElement>>(\n    (event) => onSelect(event.currentTarget.dataset.id!),\n    [onSelect]\n  )\n  const handleKeyPress = useCallback<React.KeyboardEventHandler<HTMLDivElement>>(\n    (event) => {\n      if (event.key === 'Enter') {\n        onSelect(event.currentTarget.dataset.id!)\n      }\n    },\n    [onSelect]\n  )\n  const width = 200 * getDevicePixelRatio({maxDpr: 2})\n\n  return (\n    <>\n      <Box padding={4}>\n        <ThumbGrid gap={2}>\n          {assets.map((asset) => {\n            return (\n              <Card\n                key={asset._id}\n                as=\"button\"\n                data-id={asset._id}\n                onClick={handleClick}\n                onKeyPress={handleKeyPress}\n                tabIndex={0}\n                radius={2}\n                padding={1}\n                style={{lineHeight: 0}}\n                __unstable_focusRing\n              >\n                <VideoThumbnail asset={asset} secrets={secrets} width={width} />\n              </Card>\n            )\n          })}\n        </ThumbGrid>\n        {isLoading && assets.length === 0 && (\n          <Flex justify=\"center\">\n            <Spinner muted />\n          </Flex>\n        )}\n\n        {!isLoading && assets.length === 0 && (\n          <Text align=\"center\" muted>\n            No videos\n          </Text>\n        )}\n      </Box>\n      {assets.length > 0 && !isLastPage && (\n        <CardLoadMore tone=\"default\" padding={4}>\n          <Flex direction=\"column\">\n            <Button\n              type=\"button\"\n              icon={DownloadIcon}\n              loading={isLoading}\n              onClick={onLoadMore}\n              text=\"Load more\"\n              tone=\"primary\"\n            />\n          </Flex>\n        </CardLoadMore>\n      )}\n    </>\n  )\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAGA;;;;;;AAWe,SAASA,WAAT,OAOL;EAAA,IANRC,MAMQ,QANRA,MAMQ;EAAA,IALRC,SAKQ,QALRA,SAKQ;EAAA,IAJRC,OAIQ,QAJRA,OAIQ;EAAA,IAHRC,UAGQ,QAHRA,UAGQ;EAAA,IAFRC,QAEQ,QAFRA,QAEQ;EAAA,IADRC,UACQ,QADRA,UACQ;EACR,IAAMC,WAAW,GAAG,IAAAC,kBAAA,EACjBC,KAAD,IAAWJ,QAAQ,CAACI,KAAK,CAACC,aAAN,CAAoBC,OAApB,CAA4BC,EAA7B,CADD,EAElB,CAACP,QAAD,CAFkB,CAApB;EAIA,IAAMQ,cAAc,GAAG,IAAAL,kBAAA,EACpBC,KAAD,IAAW;IACT,IAAIA,KAAK,CAACK,GAAN,KAAc,OAAlB,EAA2B;MACzBT,QAAQ,CAACI,KAAK,CAACC,aAAN,CAAoBC,OAApB,CAA4BC,EAA7B,CAAR;IACD;EACF,CALoB,EAMrB,CAACP,QAAD,CANqB,CAAvB;EAQA,IAAMU,KAAK,GAAG,MAAM,IAAAC,wCAAA,EAAoB;IAACC,MAAM,EAAE;EAAT,CAApB,CAApB;EAEA,oBACE,yEACE,6BAAC,OAAD;IAAK,OAAO,EAAE;EAAd,gBACE,6BAAC,sBAAD;IAAW,GAAG,EAAE;EAAhB,GACGhB,MAAM,CAACiB,GAAP,CAAYC,KAAD,IAAW;IACrB,oBACE,6BAAC,QAAD;MACE,GAAG,EAAEA,KAAK,CAACC,GADb;MAEE,EAAE,EAAC,QAFL;MAGE,WAASD,KAAK,CAACC,GAHjB;MAIE,OAAO,EAAEb,WAJX;MAKE,UAAU,EAAEM,cALd;MAME,QAAQ,EAAE,CANZ;MAOE,MAAM,EAAE,CAPV;MAQE,OAAO,EAAE,CARX;MASE,KAAK,EAAE;QAACQ,UAAU,EAAE;MAAb,CATT;MAUE,oBAAoB;IAVtB,gBAYE,6BAAC,2BAAD;MAAgB,KAAK,EAAEF,KAAvB;MAA8B,OAAO,EAAEhB,OAAvC;MAAgD,KAAK,EAAEY;IAAvD,EAZF,CADF;EAgBD,CAjBA,CADH,CADF,EAqBGb,SAAS,IAAID,MAAM,CAACqB,MAAP,KAAkB,CAA/B,iBACC,6BAAC,QAAD;IAAM,OAAO,EAAC;EAAd,gBACE,6BAAC,WAAD;IAAS,KAAK;EAAd,EADF,CAtBJ,EA2BG,CAACpB,SAAD,IAAcD,MAAM,CAACqB,MAAP,KAAkB,CAAhC,iBACC,6BAAC,QAAD;IAAM,KAAK,EAAC,QAAZ;IAAqB,KAAK;EAA1B,eA5BJ,CADF,EAkCGrB,MAAM,CAACqB,MAAP,GAAgB,CAAhB,IAAqB,CAAClB,UAAtB,iBACC,6BAAC,yBAAD;IAAc,IAAI,EAAC,SAAnB;IAA6B,OAAO,EAAE;EAAtC,gBACE,6BAAC,QAAD;IAAM,SAAS,EAAC;EAAhB,gBACE,6BAAC,UAAD;IACE,IAAI,EAAC,QADP;IAEE,IAAI,EAAEmB,mBAFR;IAGE,OAAO,EAAErB,SAHX;IAIE,OAAO,EAAEI,UAJX;IAKE,IAAI,EAAC,WALP;IAME,IAAI,EAAC;EANP,EADF,CADF,CAnCJ,CADF;AAmDD"}